/*
*********************************************************************************************************
*	                                  
*	模块名称 : Fir低通滤波器设计
*	文件名称 : DSO_FirFilter_Step10KHz.c
*	版    本 : V1.0
*	说    明 : 用于示波器波形显示的滤波，采用80阶Fir滤波器。 
*              使用条件：Fs(采样率) = 300Ksps时，即Scale窗口显示10us/3时，Fc(截止频率)的选择，支持截止频率
*              Fc = 10KHz
*              Fc = 20KHz
*              Fc = 30KHz
*              Fc = 40KHz
*              Fc = 50KHz
*              Fc = 60KHz
*              Fc = 70KHz
*              Fc = 80KHz
*              Fc = 90KHz
*              Fc = 100KHz        
*	修改记录 :
*		版本号    日期          作者         说明
*		V1.0    2015-01-05    Eric2013       首发
*	
*	Copyright (C), 2015-2016, 安富莱电子 www.armfly.com
*
*********************************************************************************************************
*/
#include "includes.h"
#include "MainTask.h"


/*
*********************************************************************************************************
*	                                  宏定义
*********************************************************************************************************
*/
#define TEST_LENGTH_SAMPLES  650    /* 采样点数 */
#define BLOCK_SIZE           650    /* 调用一次arm_fir_f32处理的采样点个数 */
#define NUM_TAPS             81     /* 滤波器系数个数 */

/*
*********************************************************************************************************
*	                                 数组
*********************************************************************************************************
*/
extern float32_t FirDataInput[TEST_LENGTH_SAMPLES];        /* 采样点 */
extern float32_t FirDataOutput[TEST_LENGTH_SAMPLES];       /* 滤波后的输出 */
extern float32_t firStateF32[BLOCK_SIZE + NUM_TAPS - 1];   /* 状态缓存，大小numTaps + blockSize - 1*/

/*
*********************************************************************************************************
*	                                 滤波器系数
*********************************************************************************************************
*/
/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 10KHz */
const float32_t firCoeffs32LP_10KHz[NUM_TAPS] = {
  0.0005502292188f,0.0006307326839f,0.0007122113602f,0.0007916286122f,0.0008603398455f,
  0.0009040691657f,0.0009036044357f,0.0008362182998f,0.0006777559756f,0.0004052667937f,
  -5.569255587e-19f,-0.0005494627985f,-0.001244195038f,-0.002072302625f,-0.003006953746f,
  -0.004005290568f,-0.005008409731f,-0.005942528136f,-0.006721369922f,-0.007249732967f,
  -0.007428094745f,-0.007158040069f,-0.006348222494f,-0.004920508247f, -0.00281592086f,
  1.857105261e-18f, 0.003532811068f, 0.007756075822f,  0.01260984782f,  0.01800090447f,
    0.02380481735f,   0.0298698321f,  0.03602239862f,  0.04207413271f,  0.04782985523f,
    0.05309627205f,  0.05769086257f,  0.06145047769f,  0.06423915178f,  0.06595468521f,
    0.06653369218f,  0.06595468521f,  0.06423915178f,  0.06145047769f,  0.05769086257f,
    0.05309627205f,  0.04782985523f,  0.04207413271f,  0.03602239862f,   0.0298698321f,
    0.02380481735f,  0.01800090447f,  0.01260984782f, 0.007756075822f, 0.003532811068f,
  1.857105261e-18f, -0.00281592086f,-0.004920508247f,-0.006348222494f,-0.007158040069f,
  -0.007428094745f,-0.007249732967f,-0.006721369922f,-0.005942528136f,-0.005008409731f,
  -0.004005290568f,-0.003006953746f,-0.002072302625f,-0.001244195038f,-0.0005494627985f,
  -5.569255587e-19f,0.0004052667937f,0.0006777559756f,0.0008362182998f,0.0009036044357f,
  0.0009040691657f,0.0008603398455f,0.0007916286122f,0.0007122113602f,0.0006307326839f,
  0.0005502292188f
};

/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 20KHz */
const float32_t firCoeffs32LP_20KHz[NUM_TAPS] = {
  -0.0005509475013f,-0.0003903231118f,-0.0001490870927f,0.0001657114772f,0.0005324134254f,
  0.0009052493842f, 0.001210837392f, 0.001354795997f, 0.001239938312f,0.0007938564522f,
  -1.115305094e-18f,-0.001076314598f,-0.002276225016f,-0.003357433481f,-0.004029342905f,
  -0.004010519013f,-0.003099408234f,-0.001243948471f,  0.00140698324f, 0.004486430436f,
   0.007437791675f, 0.009591832757f,  0.01028504875f, 0.009001951665f,  0.00551596377f,
  -3.719059042e-18f,-0.006920243148f, -0.01418955531f, -0.02042979747f, -0.02412135899f,
   -0.02383589372f, -0.01848467067f,-0.007540562656f,  0.00880737137f,  0.02959906682f,
     0.0531655848f,  0.07730623335f,  0.09955876321f,   0.1175239831f,   0.1291952729f,
     0.1332411021f,   0.1291952729f,   0.1175239831f,  0.09955876321f,  0.07730623335f,
     0.0531655848f,  0.02959906682f,  0.00880737137f,-0.007540562656f, -0.01848467067f,
   -0.02383589372f, -0.02412135899f, -0.02042979747f, -0.01418955531f,-0.006920243148f,
  -3.719059042e-18f,  0.00551596377f, 0.009001951665f,  0.01028504875f, 0.009591832757f,
   0.007437791675f, 0.004486430436f,  0.00140698324f,-0.001243948471f,-0.003099408234f,
  -0.004010519013f,-0.004029342905f,-0.003357433481f,-0.002276225016f,-0.001076314598f,
  -1.115305094e-18f,0.0007938564522f, 0.001239938312f, 0.001354795997f, 0.001210837392f,
  0.0009052493842f,0.0005324134254f,0.0001657114772f,-0.0001490870927f,-0.0003903231118f,
  -0.0005509475013f
};

/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 30KHz */
const float32_t firCoeffs32LP_30KHz[NUM_TAPS] = {
  -6.248144429e-19f,-0.0003912865068f,-0.0006836566608f,-0.0007598898374f,-0.0005337275215f,
  8.982911585e-19f,0.0007173990016f, 0.001358139911f, 0.001590756001f, 0.001150053344f,
  -1.677086875e-18f,-0.001559248194f,-0.002920240862f,-0.003365720157f,-0.002387311775f,
  2.842637194e-18f,  0.00310705835f, 0.005704274401f, 0.006451890338f, 0.004497503862f,
  -4.217497399e-18f,-0.005682985298f, -0.01031043474f, -0.01154888794f,-0.007990931161f,
  5.592357604e-18f,  0.01002530009f,  0.01820422709f,    0.020480223f,  0.01429146435f,
  -6.757908027e-18f,  -0.0185302943f,   -0.034578152f, -0.04038725421f, -0.02967212349f,
   7.53670395e-18f,   0.0458025299f,   0.0998044908f,    0.150775224f,   0.1871641278f,
     0.2003549486f,   0.1871641278f,    0.150775224f,   0.0998044908f,   0.0458025299f,
   7.53670395e-18f, -0.02967212349f, -0.04038725421f,   -0.034578152f,  -0.0185302943f,
  -6.757908027e-18f,  0.01429146435f,    0.020480223f,  0.01820422709f,  0.01002530009f,
  5.592357604e-18f,-0.007990931161f, -0.01154888794f, -0.01031043474f,-0.005682985298f,
  -4.217497399e-18f, 0.004497503862f, 0.006451890338f, 0.005704274401f,  0.00310705835f,
  2.842637194e-18f,-0.002387311775f,-0.003365720157f,-0.002920240862f,-0.001559248194f,
  -1.677086875e-18f, 0.001150053344f, 0.001590756001f, 0.001358139911f,0.0007173990016f,
  8.982911585e-19f,-0.0005337275215f,-0.0007598898374f,-0.0006836566608f,-0.0003912865068f,
  -6.248144429e-19f
};

/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 40KHz */
const float32_t firCoeffs32LP_40KHz[NUM_TAPS] = {
  0.0005506729358f,0.0006312413025f,0.0002915130171f,-0.0003240190272f,-0.0008610336808f,
  -0.0009047982749f,-0.0002530078054f,0.0008368926356f, 0.001658534398f, 0.001449725125f,
  -2.229498664e-18f,-0.001965544652f,-0.003044665558f,-0.002073973883f,0.0008419422084f,
   0.004008520395f, 0.005012448877f, 0.002432317706f,-0.002751102904f,-0.007255579345f,
  -0.007434085011f,-0.002004239708f, 0.006353341974f,  0.01204095967f,  0.01007314492f,
  -7.434411487e-18f, -0.01263761241f, -0.01897986792f, -0.01262001693f, 0.005040224176f,
    0.02382401563f,  0.02989391983f,  0.01474421471f, -0.01722123288f, -0.04786842689f,
   -0.05313909054f, -0.01615334861f,  0.06150003523f,   0.1571994126f,   0.2359338701f,
     0.2663494051f,   0.2359338701f,   0.1571994126f,  0.06150003523f, -0.01615334861f,
   -0.05313909054f, -0.04786842689f, -0.01722123288f,  0.01474421471f,  0.02989391983f,
    0.02382401563f, 0.005040224176f, -0.01262001693f, -0.01897986792f, -0.01263761241f,
  -7.434411487e-18f,  0.01007314492f,  0.01204095967f, 0.006353341974f,-0.002004239708f,
  -0.007434085011f,-0.007255579345f,-0.002751102904f, 0.002432317706f, 0.005012448877f,
   0.004008520395f,0.0008419422084f,-0.002073973883f,-0.003044665558f,-0.001965544652f,
  -2.229498664e-18f, 0.001449725125f, 0.001658534398f,0.0008368926356f,-0.0002530078054f,
  -0.0009047982749f,-0.0008610336808f,-0.0003240190272f,0.0002915130171f,0.0006312413025f,
  0.0005506729358f
};

/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 50KHz */
const float32_t firCoeffs32LP_50KHz[NUM_TAPS] = {
  -0.0005513262586f,-1.302894147e-18f,0.0006214270834f,  0.00069072115f,-1.33205092e-18f,
  -0.0009058716823f,-0.001055116765f,6.984680832e-18f, 0.001445958042f, 0.001691444544f,
  -2.790179468e-18f,-0.002293268917f,-0.002654426964f, 3.89361359e-18f, 0.003511146177f,
   0.004013275728f,-5.16962902e-18f,-0.005185044836f,-0.005864609499f,6.547712334e-18f,
   0.007442904171f, 0.008358268067f,-7.95171039e-18f, -0.01049765479f, -0.01175268739f,
  9.304038194e-18f,  0.01474473998f,  0.01654719561f,-1.052996701e-17f, -0.02101921476f,
   -0.02385227755f,1.156174992e-17f,  0.03143068776f,  0.03671102226f,-1.234237102e-17f,
   -0.05320213363f,  -0.0673642084f,1.282869366e-17f,   0.1370509714f,   0.2752722204f,
     0.3333317339f,   0.2752722204f,   0.1370509714f,1.282869366e-17f,  -0.0673642084f,
   -0.05320213363f,-1.234237102e-17f,  0.03671102226f,  0.03143068776f,1.156174992e-17f,
   -0.02385227755f, -0.02101921476f,-1.052996701e-17f,  0.01654719561f,  0.01474473998f,
  9.304038194e-18f, -0.01175268739f, -0.01049765479f,-7.95171039e-18f, 0.008358268067f,
   0.007442904171f,6.547712334e-18f,-0.005864609499f,-0.005185044836f,-5.16962902e-18f,
   0.004013275728f, 0.003511146177f, 3.89361359e-18f,-0.002654426964f,-0.002293268917f,
  -2.790179468e-18f, 0.001691444544f, 0.001445958042f,6.984680832e-18f,-0.001055116765f,
  -0.0009058716823f,-1.33205092e-18f,  0.00069072115f,0.0006214270834f,-1.302894147e-18f,
  -0.0005513262586f
};

/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 60KHz */
const float32_t firCoeffs32LP_60KHz[NUM_TAPS] = {
 -1.248479932e-18f,-0.0006325327558f,-0.000422134588f,0.0004692059301f,0.0008627952193f,
  -1.794930437e-18f,-0.001159708714f,-0.0008386048721f,0.0009822372813f, 0.001859114505f,
  -3.351089814e-18f,-0.002520596841f,-0.001803148654f, 0.002078216989f, 0.003859200282f,
  -5.680047021e-18f, -0.00502270367f,-0.003522193991f, 0.003983821254f, 0.007270423695f,
  -8.427239153e-18f,-0.009186808951f,-0.006366339978f, 0.007131042425f,   0.0129177114f,
  -1.11744317e-17f, -0.01620636135f, -0.01124048699f,  0.01264583599f,  0.02310281433f,
  -1.350338849e-17f, -0.02995507978f, -0.02135082521f,  0.02493774705f,  0.04796636105f,
  -1.505954766e-17f, -0.07404191047f, -0.06162585691f,  0.09309853613f,    0.302559495f,
      0.400341481f,    0.302559495f,  0.09309853613f, -0.06162585691f, -0.07404191047f,
  -1.505954766e-17f,  0.04796636105f,  0.02493774705f, -0.02135082521f, -0.02995507978f,
  -1.350338849e-17f,  0.02310281433f,  0.01264583599f, -0.01124048699f, -0.01620636135f,
  -1.11744317e-17f,   0.0129177114f, 0.007131042425f,-0.006366339978f,-0.009186808951f,
  -8.427239153e-18f, 0.007270423695f, 0.003983821254f,-0.003522193991, -0.00502270367f,
  -5.680047021e-18f, 0.003859200282f, 0.002078216989f,-0.001803148654,-0.002520596841f,
  -3.351089814e-18f, 0.001859114505f,0.0009822372813f,-0.0008386048721,-0.001159708714f,
  -1.794930437e-18f,0.0008627952193f,0.0004692059301f,-0.000422134588,-0.0006325327558f,
  -1.248479932e-18f
};

/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 70KHz */
const float32_t firCoeffs32LP_70KHz[NUM_TAPS] = {
  0.0005508425529f,0.0003902487515f,-0.0005327848485f,-0.0005921945558f,0.0005323119694f,
  0.0009050769731f,-0.0004951104056f,-0.001354537904f,0.0003468348878f, 0.001940708491f,
  -3.902824246e-18f,-0.002631222364f,-0.0006367044407f, 0.003356793895f, 0.001647594851f,
  -0.004009755328f,-0.003098818008f, 0.004445434082f, 0.005028063431f,-0.004485575948f,
  -0.007436374668f, 0.003922092263f,  0.01028308924f,-0.002518021269f, -0.01348465122f,
  1.301422696e-17f,  0.01691763662f, 0.003969095182f, -0.02042590454f,-0.009863203391f,
    0.02383135259f,  0.01848114841f, -0.02694731951f, -0.03147444874f,   0.0295934286f,
    0.05315545946f, -0.03161045164f, -0.09953979403f,  0.03287374973f,   0.3158383965f,
     0.4662550092f,   0.3158383965f,  0.03287374973f, -0.09953979403f, -0.03161045164f,
    0.05315545946f,   0.0295934286f, -0.03147444874f, -0.02694731951f,  0.01848114841f,
    0.02383135259f,-0.009863203391f, -0.02042590454f, 0.003969095182f,  0.01691763662f,
  1.301422696e-17f, -0.01348465122f,-0.002518021269f,  0.01028308924f, 0.003922092263f,
  -0.007436374668f,-0.004485575948f, 0.005028063431f, 0.004445434082f,-0.003098818008f,
  -0.004009755328f, 0.001647594851f, 0.003356793895f,-0.0006367044407f,-0.002631222364f,
  -3.902824246e-18f, 0.001940708491f,0.0003468348878f,-0.001354537904f,-0.0004951104056f,
  0.0009050769731f,0.0005323119694f,-0.0005921945558f,-0.0005327848485f,0.0003902487515f,
  0.0005508425529f
};

/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 80KHz */
const float32_t firCoeffs32LP_80KHz[NUM_TAPS] = {
  -0.0005514708464f,0.0003906938655f,0.0005333925365f,-0.0005928699975f,-0.0005329191335f,
  0.0009061092278f,0.0004956750781f,-0.001356082852f,-0.0003472304961f, 0.001942922012f,
  -4.465458023e-18f,-0.002634223551f,0.0006374306395f, 0.003360622562f,-0.001649474027f,
  -0.004014328588f, 0.003102352377f, 0.004450504668f,-0.005033798516f,-0.004490692168f,
   0.007444856223f, 0.003926565405f, -0.01029481832f,-0.002520893235f,  0.01350003202f,
  -1.489036607e-17f, -0.01693693176f, 0.003973621875f,  0.02044920251f,-0.009874452837f,
   -0.02385853417f,  0.01850222796f,  0.02697805502f, -0.03151034564f, -0.02962718159f,
    0.05321608484f,  0.03164650872f, -0.09965332597f, -0.03291124105f,    0.316198647f,
     0.5334706306f,    0.316198647f, -0.03291124105f, -0.09965332597f,  0.03164650872f,
    0.05321608484f, -0.02962718159f, -0.03151034564f,  0.02697805502f,  0.01850222796f,
   -0.02385853417f,-0.009874452837f,  0.02044920251f, 0.003973621875f, -0.01693693176f,
  -1.489036607e-17f,  0.01350003202f,-0.002520893235f, -0.01029481832f, 0.003926565405f,
   0.007444856223f,-0.004490692168f,-0.005033798516f, 0.004450504668f, 0.003102352377f,
  -0.004014328588f,-0.001649474027f, 0.003360622562f,0.0006374306395f,-0.002634223551f,
  -4.465458023e-18f, 0.001942922012f,-0.0003472304961f,-0.001356082852f,0.0004956750781f,
  0.0009061092278f,-0.0005329191335f,-0.0005928699975f,0.0005333925365f,0.0003906938655f,
  -0.0005514708464f
};

/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 90KHz */
const float32_t firCoeffs32LP_90KHz[NUM_TAPS] = {
  -1.871976107e-18f,-0.0006322815898f,0.0004219669499f,0.0004690196074f,-0.000862452609f,
  -1.02656278e-18f, 0.001159248175f,-0.0008382718079f,-0.0009818472899f, 0.001858376199f,
  -5.024638734e-18f,-0.002519595902f, 0.001802432584f, 0.002077391604f,-0.003857667791f,
  2.498802119e-17f, 0.005020709243f,-0.003520795377f,-0.003982239403f, 0.007267536595f,
  -1.263583898e-17f,-0.009183160961f, 0.006363811903f, 0.007128210738f, -0.01291258167f,
  1.675499164e-17f,  0.01619992591f, -0.01123602316f,  -0.0126408143f,  0.02309363894f,
  -2.024704047e-17f, -0.02994318306f,  0.02134234644f,  0.02492784336f, -0.04794731364f,
  2.258035155e-17f,  0.07401250303f, -0.06160138547f, -0.09306156635f,    0.302439332f,
     0.6002737284f,    0.302439332f, -0.09306156635f, -0.06160138547f,  0.07401250303f,
  2.258035155e-17f, -0.04794731364f,  0.02492784336f,  0.02134234644f, -0.02994318306f,
  -2.024704047e-17f,  0.02309363894f,  -0.0126408143f, -0.01123602316f,  0.01619992591f,
  1.675499164e-17f, -0.01291258167f, 0.007128210738f, 0.006363811903f,-0.009183160961f,
  -1.263583898e-17f, 0.007267536595f,-0.003982239403f,-0.003520795377f, 0.005020709243f,
  2.498802119e-17f,-0.003857667791f, 0.002077391604f, 0.001802432584f,-0.002519595902f,
  -5.024638734e-18f, 0.001858376199f,-0.0009818472899f,-0.0008382718079f, 0.001159248175f,
  -1.02656278e-18f,-0.000862452609f,0.0004690196074f,0.0004219669499f,-0.0006322815898f,
  -1.871976107e-18f
};

/* 80阶FIR低通滤波器系数 通过fadtool获取系数 Fs = 300Ksps, Fc = 100KHz */
const float32_t firCoeffs32LP_100KKHz[NUM_TAPS] = {
  0.0005509300972f,2.603915971e-18f,-0.0006209806306f,0.0006902248715f,-2.662187744e-18f,
  -0.0009052208043f, 0.001054358669f,-1.395932466e-17f,-0.001444919035f, 0.001690229168f,
  -5.576349591e-18f,-0.002291621407f, 0.002652519848f,-7.781632129e-18f,-0.003508623457f,
   0.004010392353f,-1.033182913e-17f,-0.005181319546f,  0.00586039573f,-1.308601549e-17f,
  -0.007437556516f, 0.008352262899f,-1.589199411e-17f, -0.01049011201f,  0.01174424309f,
  -1.85947075e-17f, -0.01473414619f,  0.01653530635f,-2.104480158e-17f, -0.02100411244f,
    0.02383514121f,-2.310688509e-17f, -0.03140810505f,  0.03668464348f,-2.466700563e-17f,
    -0.0531639047f,  0.06731580943f,-2.563895278e-17f,  -0.1369525045f,   0.2750744522f,
      0.666184485f,   0.2750744522f,  -0.1369525045f,-2.563895278e-17f,  0.06731580943f,
    -0.0531639047f,-2.466700563e-17f,  0.03668464348f, -0.03140810505f,-2.310688509e-17f,
    0.02383514121f, -0.02100411244f,-2.104480158e-17f,  0.01653530635f, -0.01473414619f,
  -1.85947075e-17f,  0.01174424309f, -0.01049011201f,-1.589199411e-17f, 0.008352262899f,
  -0.007437556516f,-1.308601549e-17f,  0.00586039573f,-0.005181319546f,-1.033182913e-17f,
   0.004010392353f,-0.003508623457f,-7.781632129e-18f, 0.002652519848f,-0.002291621407f,
  -5.576349591e-18f, 0.001690229168f,-0.001444919035f,-1.395932466e-17f, 0.001054358669f,
  -0.0009052208043f,-2.662187744e-18f,0.0006902248715f,-0.0006209806306f,2.603915971e-18f,
  0.0005509300972f
};

/*
*********************************************************************************************************
*	函 数 名: DSO_FirFilter_Step10KHz
*	功能说明: FIR滤波器。
*	形    参: 无        	
*	返 回 值: 无
*********************************************************************************************************
*/
void DSO_FirFilter_Step10KHz(void)
{
	arm_fir_instance_f32 S;
	uint16_t i;
	
	/* 获取要滤波的数值 */
	for(i = 0; i < BLOCK_SIZE; i++)
	{
		FirDataInput[i] =g_usWaveBuf1[i+g_usCurTriPos+g_usCurTriStep];
	}
	
	/* FIR低通滤波器，截止频率100KHz */
	if(g_ucFirFlter_Step10KHz == 1)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_10KHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	/* FIR低通滤波器，截止频率200KHz */
	else if(g_ucFirFlter_Step10KHz == 2)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_20KHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	/* FIR低通滤波器，截止频率300KHz */
	else if(g_ucFirFlter_Step10KHz == 3)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_30KHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	/* FIR低通滤波器，截止频率400KHz */
	else if(g_ucFirFlter_Step10KHz == 4)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_40KHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	/* FIR低通滤波器，截止频率500KHz */
	else if(g_ucFirFlter_Step10KHz == 5)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_50KHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	/* FIR低通滤波器，截止频率600KHz */
	else if(g_ucFirFlter_Step10KHz == 6)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_60KHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	/* FIR低通滤波器，截止频率700KHz */
	else if(g_ucFirFlter_Step10KHz == 7)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_70KHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	/* FIR低通滤波器，截止频率800KHz */
	else if(g_ucFirFlter_Step10KHz == 8)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_80KHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	/* FIR低通滤波器，截止频率900KHz */
	else if(g_ucFirFlter_Step10KHz == 9)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_90KHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	/* FIR低通滤波器，截止频率1000KHz */
	else if(g_ucFirFlter_Step10KHz == 10)
	{
		arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32LP_100KKHz[0], &firStateF32[0], BLOCK_SIZE);
	}
	
	/* 80阶FIR滤波 */
	arm_fir_f32(&S, FirDataInput, FirDataOutput, BLOCK_SIZE);
	
	/* 输出滤波器数值 */
	for(i = 0; i < DSOSCREEN_LENGTH; i++)
	{
		g_usWaveBuf[i] =FirDataOutput[i+50];
	}
}

/***************************** 安富莱电子 www.armfly.com (END OF FILE) *********************************/
